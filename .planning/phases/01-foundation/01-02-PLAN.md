---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/components/shared/StatusBadge.tsx
  - src/components/shared/LoadingState.tsx
  - src/components/shared/EmptyState.tsx
  - src/components/shared/ErrorState.tsx
  - src/components/shared/CopyButton.tsx
  - src/components/shared/PageHeader.tsx
  - src/types/index.ts
autonomous: true
must_haves:
  truths:
    - "StatusBadge renders different colors for different status values"
    - "LoadingState shows skeleton placeholders"
    - "EmptyState shows message and optional action"
    - "ErrorState shows error message and retry button"
    - "CopyButton copies text to clipboard on click"
  artifacts:
    - path: "src/components/shared/StatusBadge.tsx"
      provides: "Color-coded status badge component"
      exports: ["StatusBadge"]
    - path: "src/components/shared/LoadingState.tsx"
      provides: "Skeleton loading placeholder"
      exports: ["LoadingState"]
    - path: "src/components/shared/EmptyState.tsx"
      provides: "Empty state with message and optional action"
      exports: ["EmptyState"]
    - path: "src/components/shared/ErrorState.tsx"
      provides: "Error state with retry capability"
      exports: ["ErrorState"]
    - path: "src/components/shared/CopyButton.tsx"
      provides: "One-click copy to clipboard"
      exports: ["CopyButton"]
    - path: "src/components/shared/PageHeader.tsx"
      provides: "Consistent page header with title and optional actions"
      exports: ["PageHeader"]
    - path: "src/types/index.ts"
      provides: "Shared base types and status enums"
      contains: "EntityStatus"
  key_links:
    - from: "src/components/shared/StatusBadge.tsx"
      to: "src/types/index.ts"
      via: "imports EntityStatus type"
      pattern: "import.*EntityStatus"
    - from: "src/components/shared/ErrorState.tsx"
      to: "retry callback"
      via: "onRetry prop passed by consumer"
---

<objective>
Create reusable shared UI components that every feature page will use.

Purpose: INFR-05 (loading/empty/error states), DETL-05 (status badges), DETL-06 (copy to clipboard). These shared components establish the visual language used across all features.
Output: A set of composed components built on shadcn/ui primitives, plus shared TypeScript types.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/ARCHITECTURE.md (shared component patterns: StatusBadge, LoadingState, EmptyState, ErrorState, EntityHeader)

Source files:
@src/utils/statusUtils.ts (existing status color logic — adapt for new StatusBadge)
@src/types/index.ts (existing types — reference but rewrite for strict TS)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared TypeScript types</name>
  <files>src/types/index.ts</files>
  <action>
    Create the base shared types file. These types are used across multiple features.

    Include:
    - EntityStatus type: "active" | "inactive" | "blocked" | "pending" | "suspended"
    - EntityType type: "user" | "retailer" | "courier" | "order"
    - OrderStatus type: "pending" | "confirmed" | "preparing" | "ready" | "in_delivery" | "delivered" | "cancelled"
    - PaymentStatus type: "pending" | "paid" | "failed" | "refunded"
    - NotePriority type: "low" | "medium" | "high" | "urgent"
    - PaginatedResponse<T> interface: { data: T[], meta: { total: number, page: number, limit: number, totalPages: number } }
    - ApiErrorResponse interface: { message: string, statusCode: number }
    - BaseEntity interface: { id: string, createdAt: string, updatedAt: string }

    Use string literal union types (not enums) for status types — more flexible with backend data that may not match enum values exactly.

    Add JSDoc comments on each type describing its purpose.

    Do NOT include feature-specific types (User, Retailer, etc.) — those belong in their feature folders.
  </action>
  <verify>`npx tsc --noEmit` passes for this file</verify>
  <done>Shared types file exists with all base types, compiles cleanly under strict TypeScript.</done>
</task>

<task type="auto">
  <name>Task 2: Create shared UI components</name>
  <files>src/components/shared/StatusBadge.tsx, src/components/shared/LoadingState.tsx, src/components/shared/EmptyState.tsx, src/components/shared/ErrorState.tsx, src/components/shared/CopyButton.tsx, src/components/shared/PageHeader.tsx</files>
  <action>
    Create six shared components. All use shadcn/ui primitives + Tailwind. Follow Stripe Dashboard visual style (clean, professional, minimal).

    **StatusBadge.tsx:**
    - Props: status: string, size?: "sm" | "default" (default: "default")
    - Uses shadcn Badge component with variant based on status
    - Color mapping:
      - active/delivered/paid → green (bg-emerald-50 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-400)
      - pending/preparing/ready → yellow (bg-amber-50 text-amber-700)
      - inactive/cancelled/failed → red (bg-red-50 text-red-700)
      - blocked/suspended → gray (bg-gray-100 text-gray-700)
      - default → gray for unknown values
    - Displays status text capitalized with a small colored dot indicator
    - Must handle unknown status values gracefully (default to gray)

    **LoadingState.tsx:**
    - Props: variant?: "page" | "card" | "table" (default: "card"), rows?: number (default: 3)
    - Uses shadcn Skeleton component
    - "page" variant: full page with sidebar-width gap, header skeleton, content skeleton
    - "card" variant: card-shaped skeleton with title bar and content lines
    - "table" variant: table header skeleton + N rows of cells
    - Accessible: aria-busy="true", aria-label="Loading"

    **EmptyState.tsx:**
    - Props: icon?: LucideIcon, title: string, description?: string, action?: { label: string, onClick: () => void }
    - Centered layout with icon (muted color, 48px), title (font-semibold), description (text-muted-foreground), optional Button
    - Clean and helpful, not just "No data"

    **ErrorState.tsx:**
    - Props: title?: string (default: "Something went wrong"), message?: string, onRetry?: () => void
    - Shows AlertCircle icon (red), title, message, and "Try Again" Button if onRetry provided
    - Uses shadcn Button
    - Centered layout similar to EmptyState

    **CopyButton.tsx:**
    - Props: value: string, label?: string (tooltip text, default: "Copy")
    - Uses navigator.clipboard.writeText
    - Shows Copy icon, switches to Check icon for 2 seconds after copy
    - Uses shadcn Tooltip to show label on hover
    - Shows toast notification on copy via sonner: toast.success("Copied to clipboard")
    - Inline button style (ghost variant, small size) so it works next to text

    **PageHeader.tsx:**
    - Props: title: string, description?: string, children?: React.ReactNode (for action buttons)
    - Simple flex layout: title on left, children (actions) on right
    - title is h1 with text-2xl font-bold tracking-tight
    - description is text-muted-foreground below title
    - Used at top of every list/detail page for consistency

    All components must:
    - Use named exports (not default)
    - Accept className prop via cn() for composability
    - Be fully typed with no `any`
    - Support dark mode via Tailwind dark: variants
  </action>
  <verify>
    `npm run build` succeeds with no errors.
    `npx tsc --noEmit` passes.
    All six component files exist in src/components/shared/.
  </verify>
  <done>All six shared components created, typed, build cleanly. Ready for use by feature pages in Plans 03-04.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] `npx tsc --noEmit` passes (strict mode)
- [ ] src/types/index.ts exists with base types
- [ ] All 6 shared components exist in src/components/shared/
- [ ] No `any` types in any file
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Shared components ready for use by auth and app shell plans
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
