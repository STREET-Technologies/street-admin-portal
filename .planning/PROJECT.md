# STREET Admin Portal Redesign

## What This Is

A complete redesign of the STREET Admin Portal — the internal tool used by a small team (2-3 people) to manage users, retailers, couriers, orders, and referrals on the STREET marketplace platform. The current portal was built in Lovable and exported to Git; the redesign replaces it with a clean, professional admin dashboard inspired by the Stripe Dashboard aesthetic. Built with Vite + React + shadcn/ui on a new branch.

## Core Value

Fast, intuitive customer support workflows — find any user or order in seconds and resolve issues without friction.

## Requirements

### Validated

<!-- Inferred from existing codebase — these features exist and work today. -->

- ✓ Google OAuth admin authentication with email whitelist — existing (`src/components/Login.tsx`, `src/services/api.ts`)
- ✓ Global search for users, retailers, and couriers by name/email — existing (`src/services/searchService.ts`)
- ✓ User profile viewing and editing (name, email, phone, avatar) — existing (`src/components/user-tabs/OverviewTab.tsx`)
- ✓ User address viewing and editing — existing (`src/components/user-tabs/OverviewTab.tsx`)
- ✓ User and retailer order listing with pagination — existing (`src/components/user-tabs/OrdersTab.tsx`)
- ✓ Retailer/vendor profile viewing and editing — existing (`src/services/api.ts`)
- ✓ Admin notes on entities (create and view) — existing (`src/components/user-tabs/NotesTab.tsx`)
- ✓ Referral code management (create, view, update status) — existing (`src/components/ReferralCodesCard.tsx`)
- ✓ Referral settings configuration — existing (`src/components/settings/ReferralSettingsTab.tsx`)
- ✓ Light/dark theme support — existing (`src/index.css`, next-themes)
- ✓ Mock data mode for development — existing (`src/data/mockData.ts`, `VITE_USE_MOCK_DATA`)

### Active

<!-- Current scope. Building toward these in the redesign. -->

- [ ] Stripe Dashboard-inspired UI: sidebar navigation, clean typography, professional data density
- [ ] Search by order ID / order number (currently only name/email search exists)
- [ ] Inline order details visible without navigating away from context
- [ ] Proper centralized API service — all components use a single API client (fix scattered token management)
- [ ] Strict TypeScript configuration (strictNullChecks, noImplicitAny enabled)
- [ ] Fix logout bug — token cleared before API call in current implementation
- [ ] Remove all hardcoded URLs — single config source for API base URL
- [ ] Clean component architecture — no 595-line god components
- [ ] Proper error handling with user-facing feedback (no silent console.error failures)
- [ ] Input validation on all forms (referral code numeric fields, date parsing)
- [ ] Device info display per user (currently hardcoded empty)

### Out of Scope

- Communication/chat history with customers — requires backend work not yet planned
- Order actions (refund, cancel, resend) — backend doesn't support admin order mutations yet
- Analytics dashboard / business metrics — not primary use case, defer to later milestone
- Courier management beyond search/view — limited courier features in current backend
- Backend API changes — frontend-first approach, backend fixes follow in separate project
- Test coverage — important but deferred to a follow-up milestone after redesign ships
- Mobile-responsive design — admin portal used on desktop only

## Context

**Current state:** The portal was generated by Lovable (AI code generation tool) and exported to Git. The code works but suffers from poor architecture (scattered API calls, relaxed TypeScript, 595-line components, hardcoded URLs, no error handling UX). The team of 2-3 (Gunnar, Ali, Syuzana) uses it primarily for customer support — looking up users by name/email to resolve issues.

**Backend:** STREET backend is a NestJS/TypeORM/PostgreSQL API (`street-backend` repo). The admin portal communicates via REST API with Bearer token auth. Several backend fields return placeholder data (totalOrders, totalRevenue, commissionRate hardcoded). These will be addressed in a separate backend project.

**Design direction:** Stripe Dashboard — clean sidebar navigation, professional typography, good information hierarchy, data-rich but not cluttered. The portal should feel like a proper tool, not an AI-generated prototype.

**Branch strategy:** Redesign happens on a new branch (`redesign/admin-portal`) off main. The current portal continues on main until the redesign is ready to merge.

**Known backend gaps to work around:**
- No order number search endpoint (may need backend work or client-side filtering)
- Several entity fields return hardcoded placeholders from API transformation layer
- No backend suggestions/autocomplete endpoint
- User status field doesn't exist in backend (currently hardcoded as "active")

## Constraints

- **Tech stack**: Vite + React + TypeScript + shadcn/ui + Tailwind CSS — chosen for simplicity, no SSR needed
- **Backend**: Cannot modify street-backend in this project — frontend only, work with existing API endpoints
- **Auth**: Must use existing Google OAuth flow through street-backend
- **Deployment**: Vercel (static SPA deployment)
- **API compatibility**: Must work with current street-backend API contract (same endpoints, same response shapes)
- **Design system**: shadcn/ui components with Stripe Dashboard-inspired customization

## Key Decisions

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Vite + React over Next.js | No SSR/SEO needs for internal tool; simpler deployment; less server complexity | — Pending |
| Keep shadcn/ui | Good component library, supports Stripe-like aesthetic, team already familiar | — Pending |
| Frontend-first, backend after | Ship usable redesign quickly, fix backend gaps in follow-up project | — Pending |
| New branch, not incremental | Current code too messy for incremental improvement; clean rebuild is faster | — Pending |
| Stripe Dashboard as design reference | Professional, data-rich, well-organized — matches admin portal needs | — Pending |

---
*Last updated: 2026-02-09 after initialization*
